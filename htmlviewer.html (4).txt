<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <!-- ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£: ‡¶è‡¶á ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡¶ü‡¶ø ‡¶≠‡¶ø‡¶â‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶ï‡ßá ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶•‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡ßá‡¶≤‡¶æ‡ßü, ‡¶Ø‡¶æ ‡¶∞‡ßá‡¶∏‡¶™‡¶®‡¶∏‡¶ø‡¶≠ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>‡¶∂‡ßÅ‡¶≠ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶® ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ</title>
    <!-- Tailwind CSS ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶´‡¶®‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶á‡¶ï‡¶® ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá -->
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght300;400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Chart.js CDN Removed -->
    
    <script>
        // Tailwind ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Hind Siliguri', 'sans-serif'],
                        cursive: ['Pacifico', 'cursive'],
                    },
                    colors: {
                        primary: '#FF6B6B', // ‡¶∏‡¶´‡¶ü ‡¶≤‡¶æ‡¶≤
                        secondary: '#4ECDC4', // ‡¶®‡ßÄ‡¶≤‡¶ö‡ßá ‡¶∏‡¶¨‡ßÅ‡¶ú
                        accent: '#FFE66D', // ‡¶π‡¶≤‡ßÅ‡¶¶
                    }
                }
            }
        }
    </script>

    <style>
        /* ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶ø‡¶Ç */
        body {
            scroll-behavior: smooth;
        }
        /* ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶¨‡ßç‡¶≤‡¶¨‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤-‡¶¨‡¶æ‡¶®‡ßç‡¶ß‡¶¨ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá */
        .blob {
            position: absolute;
            filter: blur(40px);
            z-index: -1;
            opacity: 0.6;
            animation: move 10s infinite alternate;
        }
        @keyframes move {
            from { transform: translate(0, 0) scale(1); }
            to { transform: translate(20px, -20px) scale(1.1); }
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }
        /* Modal Animation Classes */
        .modal-show {
            opacity: 1 !important;
        }
        .modal-show > div {
            transform: scale(1) !important;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 overflow-x-hidden">

    <!-- Background Music Button -->
    <audio id="birthday-audio" loop muted>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶∏‡¶Æ‡¶∞‡ßç‡¶•‡¶® ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡•§
    </audio>
    <button id="music-toggle" onclick="toggleMusic()" class="fixed bottom-4 right-4 z-50 p-3 rounded-full bg-primary text-white shadow-lg hover:scale-105 transition-transform duration-300">
        <i id="music-icon" class="fas fa-volume-mute"></i>
    </button>

    <!-- Navbar -->
    <!-- ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá ‡¶õ‡ßã‡¶ü, ‡¶°‡ßá‡¶∏‡ßç‡¶ï‡¶ü‡¶™‡ßá ‡¶∏‡ßç‡¶™‡¶∑‡ßç‡¶ü -->
    <nav class="fixed w-full z-50 transition-all duration-300 bg-white/80 backdrop-blur-md shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="text-2xl font-cursive text-primary font-bold">Happy Birthday</div>
                <!-- ‡¶®‡ßç‡¶Ø‡¶æ‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶≤‡¶ø‡¶Ç‡¶ï‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Æ‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶â‡¶™‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá -->
                <div class="hidden md:flex space-x-8">
                    <a href="#home" class="text-gray-600 hover:text-primary transition font-medium">‡¶π‡ßã‡¶Æ</a>
                    <a href="#memories" class="text-gray-600 hover:text-primary transition font-medium">‡¶ó‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø</a>
                    <!-- '‡¶™‡¶•‡¶ö‡¶≤‡¶æ' ‡¶≤‡¶ø‡¶Ç‡¶ï‡¶ü‡¶ø ‡¶∞‡¶ø‡¶Æ‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã -->
                    <a href="#wish" class="text-gray-600 hover:text-primary transition font-medium">‡¶ó‡ßã‡¶™‡¶® ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="relative min-h-screen flex items-center justify-center pt-24 pb-12 overflow-hidden">
        
        <!-- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶ü‡ßá‡¶° ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶¨‡ßç‡¶≤‡¶¨ (‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤-‡¶¨‡¶æ‡¶®‡ßç‡¶ß‡¶¨) -->
        <div class="blob bg-purple-300 w-64 h-64 md:w-96 md:h-96 rounded-full top-0 left-0 mix-blend-multiply"></div>
        <div class="blob bg-yellow-300 w-64 h-64 md:w-96 md:h-96 rounded-full top-0 right-0 mix-blend-multiply animation-delay-2000"></div>
        <div class="blob bg-pink-300 w-64 h-64 md:w-96 md:h-96 rounded-full -bottom-32 left-20 mix-blend-multiply animation-delay-4000"></div>

        <div class="container mx-auto px-4 grid md:grid-cols-2 gap-12 items-center relative z-10">
            <div class="text-center md:text-left">
                <!-- ‡¶∞‡ßá‡¶∏‡¶™‡¶®‡¶∏‡¶ø‡¶≠ ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú -->
                <h1 class="text-5xl lg:text-7xl font-bold leading-tight mb-6 text-slate-800">
                    ‡¶∂‡ßÅ‡¶≠ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶® <br>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600">‡¶¨‡ßá‡¶∏‡ßç‡¶ü ‡¶´‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°!</span>
                </h1>
                <p class="text-lg text-gray-600 mb-8 max-w-lg mx-auto md:mx-0">
                    ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¶‡¶ø‡¶®‡¶ü‡¶æ ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶§‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø! ‡¶Ö‡¶®‡ßá‡¶ï ‡¶Ö‡¶®‡ßá‡¶ï ‡¶Ü‡¶®‡¶®‡ßç‡¶¶, ‡¶π‡¶æ‡¶∏‡¶ø ‡¶Ü‡¶∞ ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶æ‡ßü ‡¶≠‡¶∞‡ßá ‡¶â‡¶†‡ßÅ‡¶ï ‡¶§‡ßã‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡•§
                </p>
                <!-- ‡¶¨‡¶æ‡¶ü‡¶®‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç, ‡¶°‡ßá‡¶∏‡ßç‡¶ï‡¶ü‡¶™‡ßá ‡¶™‡¶æ‡¶∂‡¶æ‡¶™‡¶æ‡¶∂‡¶ø -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
                    <button onclick="handleSurpriseClick()" class="px-8 py-4 bg-primary text-white rounded-full font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition duration-300 flex items-center justify-center gap-2">
                        <i class="fas fa-gift"></i> ‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                    </button>
                    <a href="#wish" class="px-8 py-4 bg-white text-gray-700 border-2 border-gray-200 rounded-full font-bold hover:border-primary hover:text-primary transition duration-300 flex items-center justify-center gap-2">
                        <i class="fas fa-key"></i> ‡¶ó‡ßã‡¶™‡¶® ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ
                    </a>
                </div>
            </div>
            
            <!-- Birthday Person Photo Section - ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Æ‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶â‡¶™‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá -->
            <div class="relative hidden md:block">
                <div class="w-full h-[500px] bg-white rounded-[2rem] shadow-2xl p-4 rotate-3 hover:rotate-0 transition duration-500">
                    <!-- ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® -->
                    <img src="https://i.postimg.cc/9FN0Hqnf/Happy_Birthday_Instagram_Post_(2).jpg" 
                         class="w-full h-full object-cover rounded-[1.5rem]" 
                         alt="Birthday Person Photo"
                         onerror="this.onerror=null; this.src='https://placehold.co/800x500/FF6B6B/ffffff?text=Please+Replace+Me+With+Direct+URL'">
                </div>
            </div>
        </div>
    </section>

    <!-- Memories Gallery -->
    <section id="memories" class="py-20 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <span class="text-primary font-cursive text-2xl">Memories</span>
                <h2 class="text-4xl font-bold text-gray-800 mt-2">‡¶∏‡ßá‡¶∞‡¶æ ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§‡¶ó‡ßÅ‡¶≤‡ßã</h2>
            </div>

            <!-- ‡¶ó‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø ‡¶ó‡ßç‡¶∞‡¶ø‡¶°: ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá 1, ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü‡ßá 2, ‡¶≤‡¶æ‡¶∞‡ßç‡¶ú ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá 4 ‡¶ï‡¶≤‡¶æ‡¶Æ -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 auto-rows-[200px]">
                
                <!-- ‡¶è‡¶á ‡¶õ‡¶¨‡¶ø‡¶ü‡¶ø ‡¶≤‡¶æ‡¶∞‡ßç‡¶ú ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá 2x2 ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ ‡¶®‡ßá‡¶¨‡ßá -->
                <div class="sm:col-span-2 sm:row-span-2 rounded-2xl overflow-hidden shadow-lg group relative cursor-pointer">
                    <img src="https://i.postimg.cc/htD9GxDX/1739468991499.jpg" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Memory 1">
                    <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition duration-300 flex items-end p-6">
                        <p class="text-white font-bold text-xl">‡¶∏‡ßá‡¶∞‡¶æ ‡¶Ü‡¶°‡ßç‡¶°‡¶æ</p>
                    </div>
                </div>

                <div class="rounded-2xl overflow-hidden shadow-lg group relative cursor-pointer">
                    <img src="https://i.postimg.cc/MH8Ngtyh/Untitled_145.jpg" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Memory 2">
                </div>
                <div class="rounded-2xl overflow-hidden shadow-lg group relative cursor-pointer">
                    <img src="https://i.postimg.cc/J7JpSbY3/Untitled_1_98.jpg" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Memory 3">
                </div>
                <!-- ‡¶è‡¶á ‡¶õ‡¶¨‡¶ø‡¶ü‡¶ø ‡¶≤‡¶æ‡¶∞‡ßç‡¶ú ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá 2 ‡¶ï‡¶≤‡¶æ‡¶Æ ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ ‡¶®‡ßá‡¶¨‡ßá -->
                <div class="lg:col-span-2 rounded-2xl overflow-hidden shadow-lg group relative cursor-pointer">
                    <img src="https://i.postimg.cc/ydvWB61V/Untitled988.jpg" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Memory 4">
                </div>
            </div>
        </div>
    </section>
    
    <!-- Wish Section (Secret Message Unlocker with LLM Integration) -->
    <section id="wish" class="py-20 relative">
        <div class="absolute inset-0 bg-primary/5 -skew-y-3 transform origin-top-left z-0"></div>
        <div class="container mx-auto px-4 relative z-10">
            <div class="max-w-3xl mx-auto glass-card rounded-3xl p-8 md:p-12 text-center">
                <div class="w-20 h-20 bg-white rounded-full mx-auto -mt-20 flex items-center justify-center shadow-lg mb-8">
                    <i class="fas fa-lock-open text-3xl text-primary"></i>
                </div>
                
                <h2 class="text-3xl font-bold mb-6 text-gray-800">‡¶ó‡ßã‡¶™‡¶® ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶â‡¶®‡ßç‡¶Æ‡ßã‡¶ö‡¶® ‚ú®</h2>
                <p class="text-gray-600 mb-4 text-sm md:text-base">‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßá‡¶õ‡ßá! ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶ò‡¶∞‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶õ‡¶®‡ßç‡¶¶‡ßá‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∂‡¶¨‡ßç‡¶¶ (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ú‡¶æ‡¶®, ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ, ‡¶¨‡ßá‡¶∏‡ßç‡¶ü ‡¶´‡ßá‡¶®‡ßç‡¶° ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡ßü ‡¶∞‡¶ô, ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶¨‡¶æ ‡¶∂‡¶ñ‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ) ‡¶≤‡ßá‡¶ñ‡ßã:</p>

                <!-- Friend's Input Area -->
                <input type="text" id="reveal-context" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary mb-4 text-center font-bold text-lg" placeholder="‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶õ‡¶®‡ßç‡¶¶‡ßá‡¶∞ ‡¶ï‡ßÄ-‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶≤‡ßá‡¶ñ‡ßã (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶´‡ßÅ‡¶ü‡¶¨‡¶≤, ‡¶®‡ßÄ‡¶≤, ‡¶ï‡¶´‡¶ø)">

                <!-- ‡¶¨‡¶æ‡¶ü‡¶® ‡¶è‡¶¨‡¶Ç ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç, ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶™‡¶æ‡¶∂‡¶æ‡¶™‡¶æ‡¶∂‡¶ø -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-8">
                    <button id="reveal-button" onclick="revealMessage()" class="w-full sm:w-auto px-6 py-3 bg-secondary text-white rounded-full font-bold shadow-md hover:bg-teal-500 transition duration-300 flex items-center justify-center gap-2">
                        üîë ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ‡¶ü‡¶ø ‡¶â‡¶®‡ßç‡¶Æ‡ßã‡¶ö‡¶® ‡¶ï‡¶∞‡ßã
                    </button>
                    <div id="loading-indicator" class="hidden text-gray-600 font-medium flex items-center gap-2">
                        <i class="fas fa-spinner fa-spin"></i> ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶ï‡¶∞‡¶õ‡ßá...
                    </div>
                </div>

                <!-- LLM Output Area -->
                <div class="text-left bg-white/50 p-6 rounded-xl border border-white min-h-[120px] shadow-inner">
                    <p class="text-lg leading-relaxed text-gray-700 italic" id="generated-wish">
                        ‡¶ï‡ßÄ-‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°‡¶ü‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßá "‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ‡¶ü‡¶ø ‡¶â‡¶®‡ßç‡¶Æ‡ßã‡¶ö‡¶® ‡¶ï‡¶∞‡ßã" ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ‡¶ü‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá!
                    </p>
                </div>

                
                <button onclick="handleCakeClick()" class="mt-8 bg-gray-800 text-white px-8 py-3 rounded-full font-bold hover:bg-gray-700 transition shadow-lg w-full md:w-auto">
                    üéÇ ‡¶ï‡ßá‡¶ï ‡¶ï‡¶æ‡¶ü‡ßã!
                </button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-white border-t py-8 text-center">
        <p class="text-gray-500">Made with ‚ù§Ô∏è for Best Friend</p>
    </footer>

    <!-- Custom Message Modal -->
    <div id="message-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-[100] p-4 transition-opacity duration-300 opacity-0">
        <!-- max-w-xs (small screen friendly) ‡¶è‡¶¨‡¶Ç w-full ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã -->
        <div class="bg-white p-8 rounded-xl shadow-2xl text-center max-w-sm w-full transform transition duration-300 scale-95 glass-card border-2 border-primary">
            <i id="modal-icon" class="text-5xl mb-4 text-yellow-600"></i> 
            <h3 id="modal-title" class="text-2xl font-bold text-gray-800 mb-4"></h3>
            <p id="modal-message" class="text-2xl font-extrabold text-red-600 animate-pulse"></p>
            <button onclick="hideModal()" class="mt-6 px-6 py-2 bg-primary text-white rounded-full font-bold hover:bg-red-500 transition">‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶</button>
        </div>
    </div>


    <!-- JavaScript Functions -->
    <script>
        const apiKey = "AIzaSyCAQcI8Wz_xjklo6fC0P2tZAcfSmy9EUFA"; // Gemini API Key
        const LLM_API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent";

        // --- Audio Control ---
        document.addEventListener('DOMContentLoaded', () => {
            const audio = document.getElementById('birthday-audio');
            // Autoplay is handled by setting the muted attribute
            audio.play().catch(e => {
                console.log("Autoplay was prevented. User interaction required.");
            });
            
            // Chart initialization is removed from here
        });

        function toggleMusic() {
            const audio = document.getElementById('birthday-audio');
            const icon = document.getElementById('music-icon');
            if (audio.paused) {
                audio.muted = false; // Unmute before playing
                audio.play().then(() => {
                    icon.className = 'fas fa-volume-up';
                }).catch(e => {
                    // Play failed
                    showMessageModal("‡¶Ö‡¶°‡¶ø‡¶ì ‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø‡¶®‡¶ø‡•§ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶≤‡¶æ‡¶ó‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§", "‡¶Ö‡¶°‡¶ø‡¶ì ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø", "fas fa-exclamation-triangle text-red-500");
                });
            } else {
                audio.pause();
                icon.className = 'fas fa-volume-mute';
            }
        }
        
        // --- Modal Control Functions ---
        function showMessageModal(message, title, iconClass) {
            const modal = document.getElementById('message-modal');
            
            const titleElement = document.getElementById('modal-title');
            
            const safeTitle = (title || "").trim(); 

            if (safeTitle === "") {
                titleElement.style.display = 'none';
            } else {
                titleElement.style.display = 'block';
                titleElement.textContent = title;
            }

            document.getElementById('modal-message').textContent = message;
            document.getElementById('modal-icon').className = iconClass;

            modal.classList.remove('hidden');
            modal.classList.add('flex');
            // Force reflow for transition
            requestAnimationFrame(() => {
                modal.classList.add('modal-show');
            });
        }

        function hideModal() {
            const modal = document.getElementById('message-modal');
            modal.classList.remove('modal-show');
            // Hide after transition
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex'); 
            }, 300);
        }
        
        // ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡ßß: Hero Section-‡¶è‡¶∞ '‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®' ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
        function handleSurpriseClick() {
            showMessageModal(
                "‡¶∂‡ßÅ‡¶≠ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶® ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡ßü ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ", 
                "‡¶∏‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú!", // ‡¶è‡¶ï‡¶ü‡¶ø ‡¶õ‡ßã‡¶ü ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ
                "fas fa-gift text-5xl text-primary mb-4" // ‡¶â‡¶™‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Ü‡¶á‡¶ï‡¶®
            );
            // ‡¶ï‡¶®‡¶´‡ßá‡¶ü‡¶ø ‡¶ö‡¶æ‡¶≤‡ßÅ
            startCelebration(); 
        }


        // ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡ß®: Wish Section-‡¶è‡¶∞ '‡¶ï‡ßá‡¶ï ‡¶ï‡¶æ‡¶ü‡ßã!' ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
        function handleCakeClick() {
            // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡¶ü‡¶ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
            showMessageModal(
                "‡¶ï‡ßá‡¶ï ‡¶ï‡¶ø‡¶®‡¶æ‡¶∞ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶®‡ßá‡¶á!", 
                "Sorry", 
                "fas fa-birthday-cake text-5xl text-yellow-600 mb-4" // ‡¶ï‡ßá‡¶ï ‡¶Ü‡¶á‡¶ï‡¶®
            );
            // ‡¶ï‡¶®‡¶´‡ßá‡¶ü‡¶ø ‡¶ö‡¶æ‡¶≤‡ßÅ
            startCelebration(); 
        }

        // --- Core Functions ---

        // Exponential backoff mechanism for API calls
        async function fetchWithRetry(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429 && i < maxRetries - 1) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response;
                } catch (error) {
                    console.error("Fetch attempt failed:", error);
                    if (i === maxRetries - 1) throw error;
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }

        // LLM Feature: Reveals a personalized birthday message (using gemini-2.5-flash-preview-09-2025)
        async function revealMessage() {
            const context = document.getElementById('reveal-context').value;
            const outputElement = document.getElementById('generated-wish');
            const loadingIndicator = document.getElementById('loading-indicator');
            const revealButton = document.getElementById('reveal-button');

            if (context.trim() === "") {
                outputElement.textContent = "‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ‡¶ü‡¶ø ‡¶â‡¶®‡ßç‡¶Æ‡ßã‡¶ö‡¶® ‡¶ï‡¶∞‡ßã‡•§";
                return;
            }

            // Show loading and disable button
            loadingIndicator.classList.remove('hidden');
            revealButton.disabled = true;
            revealButton.style.opacity = 0.5;
            outputElement.innerHTML = `<i class="fas fa-spinner fa-spin"></i> ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ó‡ßã‡¶™‡¶® ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶ï‡¶∞‡¶õ‡ßá...`;

            const systemPrompt = "‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶è‡¶ï‡¶ú‡¶® ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶∏‡ßç‡¶§ ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ, ‡¶Ø‡ßá ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßÅ‡¶™‡ßç‡¶∞‡ßá‡¶∞‡¶£‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã‡•§ ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ‡¶ü‡¶ø ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶§‡ßç‡¶¨‡ßá‡¶∞ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨ ‡¶è‡¶¨‡¶Ç ‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡¶§‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∂‡ßÅ‡¶≠‡¶ï‡¶æ‡¶Æ‡¶®‡¶æ ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡¶¨‡ßá‡•§ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ‡¶ü‡¶ø ‡¶Ø‡ßá‡¶® ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶∞ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶ï‡ßÄ-‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¨‡¶æ ‡¶•‡¶ø‡¶Æ‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡¶ø‡¶§ ‡¶π‡ßü‡•§ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶≠‡¶æ‡¶∑‡¶æ‡ßü ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ‡¶ü‡¶ø ‡¶≤‡¶ø‡¶ñ‡¶¨‡ßá, ‡¶ï‡ßã‡¶®‡ßã ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ ‡¶¨‡¶æ ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶≠‡ßÇ‡¶Æ‡¶ø‡¶ï‡¶æ ‡¶®‡ßü‡•§";
            const userQuery = `‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡ßü ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§, ‡¶ó‡ßã‡¶™‡¶® ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßã‡•§ ‡¶∏‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡ßÄ-‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡ßá: ${context}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                const response = await fetchWithRetry(`${LLM_API_URL}?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const generatedText = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (generatedText) {
                    outputElement.textContent = generatedText;
                } else {
                    outputElement.textContent = "‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßã‡•§";
                }

            } catch (error) {
                console.error("Gemini LLM API Error:", error);
                outputElement.textContent = "‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶¨‡¶æ API ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§";
            } finally {
                // Hide loading and enable button
                loadingIndicator.classList.add('hidden');
                revealButton.disabled = false;
                revealButton.style.opacity = 1;
            }
        }

        // Confetti Animation (Existing Function)
        function startCelebration() {
            var duration = 3000;
            var end = Date.now() + duration;

            (function frame() {
                // ‡¶¨‡¶æ‡¶Å ‡¶¶‡¶ø‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶®‡¶´‡ßá‡¶ü‡¶ø
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#FF6B6B', '#4ECDC4', '#FFE66D', '#7B68EE']
                });
                // ‡¶°‡¶æ‡¶® ‡¶¶‡¶ø‡¶ï ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶®‡¶´‡ßá‡¶ü‡¶ø
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#FF6B6B', '#4ECDC4', '#FFE66D', '#7B68EE']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }
    </script>
</body>
</html>